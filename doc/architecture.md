# 麻雀点数計算アプリ アーキテクチャ設計

## 1. システム概要

麻雀の点数計算を行うシングルページアプリケーション（SPA）です。
フロントエンドのみで完結する設計とし、すべての計算ロジックはクライアントサイドで実行します。

## 2. 技術スタック

### フロントエンド
- React（UIライブラリ）
- Material UI（UIコンポーネント）
- JavaScript（プログラミング言語）
- ESLint/Prettier（コード品質管理）

## 3. コンポーネント設計

### Atomic Design パターンに基づくコンポーネント階層

#### Atoms（基本要素）
- MahjongTile：麻雀牌を表示する最小単位のコンポーネント
- Button：操作用ボタン
- Select：選択用ドロップダウン
- TextField：テキスト入力フィールド

#### Molecules（複合要素）
- TileSelector：牌選択用のコンポーネント
- WindSelector：風選択用のコンポーネント
- DoraDisplay：ドラ表示用のコンポーネント

#### Organisms（機能単位）
- HandInput：手牌入力セクション
- WinningConditions：和了条件入力セクション
- ScoreDisplay：点数表示セクション

#### Templates（レイアウト）
- MainLayout：アプリケーションのメインレイアウト

#### Pages（画面）
- Calculator：点数計算メイン画面

## 4. データフロー

### 状態管理
- Reactの状態管理（useState, useContext）を使用
- 複雑な状態管理が必要になった場合はReduxを検討

### 主要な状態
1. 手牌の状態
2. 上がり牌の状態
3. 場風・自風の状態
4. ドラ情報の状態
5. 計算結果の状態

## 5. ビジネスロジック

### 点数計算モジュール
- 符計算ロジック
- 役判定ロジック
- 最終点数計算ロジック

これらのロジックは独立したユーティリティ関数として実装し、再利用可能な形で設計します。

### ディレクトリ構造
```
src/
  ├── components/         # Reactコンポーネント
  │   ├── atoms/         # 基本要素
  │   ├── molecules/     # 複合要素
  │   ├── organisms/     # 機能単位
  │   ├── templates/     # レイアウト
  │   └── pages/         # 画面
  ├── utils/             # ユーティリティ関数
  │   ├── calculators/   # 点数計算関連
  │   └── validators/    # バリデーション関連
  ├── constants/         # 定数定義
  ├── hooks/             # カスタムフック
  └── types/             # 型定義（必要に応じて）
```

## 6. バリデーション要件

### 入力値の検証
- 手牌の牌数チェック（合計14枚）
- 同一牌の使用制限（4枚まで）
- 不正な組み合わせのチェック

## 7. パフォーマンス考慮事項

### 最適化手法
- メモ化（React.memo, useMemo, useCallback）
- 効率的な再レンダリング制御
- 計算ロジックの最適化

## 8. アクセシビリティ

### 対応方針
- キーボード操作のサポート
- スクリーンリーダー対応
- 適切なARIAラベルの使用

## 9. 今後の拡張性

### 想定される拡張機能
- 局情報の保存機能
- 戦績管理機能
- 統計情報の表示
- 複数言語対応
